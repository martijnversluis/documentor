<%= form_with model: checklist, class: "space-y-6", data: { controller: "nested-form", nested_form_wrapper_class: "checklist-item" } do |f| %>
  <div>
    <%= f.label :name, "Naam", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= f.text_field :name, class: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "Bijv: Vakantie checklist", autofocus: true %>
  </div>

  <div>
    <%= f.label :description, "Beschrijving", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= f.text_area :description, rows: 2, class: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "Optionele beschrijving..." %>
  </div>

  <div>
    <label class="block text-sm font-medium text-gray-700 mb-3">Items</label>
    <div id="checklist-items" data-nested-form-target="container" class="space-y-2">
      <%= f.fields_for :checklist_items do |item_form| %>
        <%= render "checklist_item_fields", f: item_form %>
      <% end %>
    </div>

    <template data-nested-form-target="template">
      <%= f.fields_for :checklist_items, ChecklistItem.new, child_index: "NEW_RECORD" do |item_form| %>
        <%= render "checklist_item_fields", f: item_form %>
      <% end %>
    </template>

    <button type="button" data-action="nested-form#add" class="mt-3 inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
      </svg>
      Item toevoegen
    </button>
  </div>

  <div class="flex items-center gap-3 pt-4 border-t border-gray-200">
    <%= f.submit checklist.persisted? ? "Opslaan" : "Aanmaken", class: "px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 cursor-pointer" %>
    <%= link_to "Annuleren", checklists_path, class: "px-4 py-2 text-gray-700 hover:text-gray-900" %>
  </div>
<% end %>
